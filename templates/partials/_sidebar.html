<!-- Modern Dashboard Sidebar -->
<aside class="sidebar" x-data="{ collapsed: false }">
    <!-- Sidebar Header -->
    <div class="sidebar-header">
        <div class="flex items-center gap-sm">
            <img src="{{ url_for('static', filename='img/metallic-s-logo.png') }}" alt="AI CEO" class="w-8 h-8">
            <span class="font-heading font-bold text-lg">AI CEO</span>
        </div>
        <button @click="collapsed = !collapsed" class="btn btn-ghost btn-sm md:hidden">
            <i data-lucide="x" class="w-4 h-4"></i>
        </button>
    </div>

    <!-- Sidebar Navigation -->
    <nav class="sidebar-nav">
        <!-- Main Navigation -->
        <div class="mb-lg">
            <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-sm px-md">Main</h4>
            <a href="/dashboard" class="sidebar-item {{ 'active' if request.endpoint == 'dashboard' else '' }}">
                <i data-lucide="layout-dashboard" class="sidebar-icon"></i>
                Dashboard
            </a>
            <a href="/one-click-generator" class="sidebar-item {{ 'active' if request.endpoint == 'one_click_generator' else '' }}">
                <i data-lucide="zap" class="sidebar-icon"></i>
                One-Click Generator
            </a>
            <a href="/products" class="sidebar-item {{ 'active' if request.endpoint == 'products' else '' }}">
                <i data-lucide="package" class="sidebar-icon"></i>
                Products
            </a>
            <a href="/marketing" class="sidebar-item {{ 'active' if request.endpoint == 'marketing' else '' }}">
                <i data-lucide="megaphone" class="sidebar-icon"></i>
                Marketing
            </a>
        </div>

        <!-- AI & Analytics -->
        <div class="mb-lg">
            <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-sm px-md">AI & Analytics</h4>
            <a href="/success-dashboard" class="sidebar-item {{ 'active' if request.endpoint == 'success_dashboard' else '' }}">
                <i data-lucide="trending-up" class="sidebar-icon"></i>
                Success Dashboard
            </a>
            <a href="/analytics" class="sidebar-item {{ 'active' if request.endpoint == 'analytics' else '' }}">
                <i data-lucide="bar-chart-3" class="sidebar-icon"></i>
                Analytics
            </a>
            <a href="/voice-preferences" class="sidebar-item {{ 'active' if request.endpoint == 'voice_preferences' else '' }}">
                <i data-lucide="mic" class="sidebar-icon"></i>
                AI Brains
            </a>
        </div>

        <!-- Business -->
        <div class="mb-lg">
            <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-sm px-md">Business</h4>
            <a href="/pricing" class="sidebar-item {{ 'active' if request.endpoint == 'pricing' else '' }}">
                <i data-lucide="credit-card" class="sidebar-icon"></i>
                Billing
            </a>
            <a href="/timeline" class="sidebar-item {{ 'active' if request.endpoint == 'timeline' else '' }}">
                <i data-lucide="clock" class="sidebar-icon"></i>
                Timeline
            </a>
        </div>

        <!-- Admin (Only for admins) -->
        {% if current_user.role == 'admin' %}
        <div class="mb-lg">
            <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-sm px-md">Admin</h4>
            <a href="/admin" class="sidebar-item {{ 'active' if request.endpoint == 'admin' else '' }}">
                <i data-lucide="shield" class="sidebar-icon"></i>
                Admin Panel
            </a>
            <a href="/database-admin" class="sidebar-item {{ 'active' if request.endpoint == 'database_admin' else '' }}">
                <i data-lucide="database" class="sidebar-icon"></i>
                Database
            </a>
        </div>
        {% endif %}
    </nav>

    <!-- Sidebar Footer -->
    <div class="p-md border-t">
        <!-- User Plan Status -->
        <div class="card card-compact mb-sm">
            <div class="text-center">
                <div class="text-xs text-gray-500">Current Plan</div>
                <div class="font-semibold text-primary">{{ user_plan.title() if user_plan else 'Free' }}</div>
                {% if not user_plan or user_plan == 'free' %}
                    <a href="/pricing" class="btn btn-primary btn-sm mt-sm">
                        <i data-lucide="arrow-up" class="w-3 h-3"></i>
                        Upgrade
                    </a>
                {% endif %}
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="flex gap-sm">
            <button onclick="window.aiCEOApp.showNotification('Help center coming soon!', 'info')" 
                    class="btn btn-ghost btn-sm flex-1" title="Help">
                <i data-lucide="help-circle" class="w-4 h-4"></i>
            </button>
            <button onclick="window.aiCEOApp.toggleTheme()" 
                    class="btn btn-ghost btn-sm flex-1" title="Toggle theme">
                <i data-lucide="moon" class="w-4 h-4"></i>
            </button>
        </div>
    </div>
</aside>

<!-- Sidebar Overlay for Mobile -->
<div x-show="!collapsed" @click="collapsed = true" 
     class="fixed inset-0 bg-black bg-opacity-50 z-998 md:hidden"
     x-transition:enter="transition-opacity ease-linear duration-200"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition-opacity ease-linear duration-200"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0">
</div>